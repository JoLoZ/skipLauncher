<link href="main.css" rel="stylesheet" />
<div class="background"></div>
<div class="wrapper">
  <div class="flex-center">
    <center>
      <h1>skipLauncher</h1>
      <button id="launch-btn" disabled style="min-width: 20rem" class="loading" onclick="launch()">
        Logging in...
      </button>
    </center>
  </div>

  <pre class="bottom-text" id="status"></pre>
</div>

<script src="topbar.js"></script>

<script>
  ipcRenderer.send("login_new", {
    visible: "select_account",
  });

  ipcRenderer.on("login_update", (event, arg) => {
    $("#status").text(arg.data + "...");
  });

  var auth = null;
  ipcRenderer.on("login_result", (event, arg) => {
    auth = arg;
    $("#launch-btn").removeClass("loading").prop("disabled", false).text("Play!");
    $("#status").text("");
  });

  function launch() {
    ipcRenderer.send("launch", auth);
    $("#status").addClass("loading").prop("disabled", true).text("Launching...");
  }

  ipcRenderer.on("launch_msg", (event, arg) => {
    $("#status").text(arg.replaceAll("[MCLC]: ", ""));
    console.log(arg);
  })
</script>
